<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>ليالي الهنوف</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Amiri&display=swap');

body {
margin: 0;
padding: 0;
font-family: 'Amiri', serif;
height: 100vh;
overflow: hidden;
background: #000;
touch-action: manipulation;
display: flex;
justify-content: center;
align-items: center;
-webkit-tap-highlight-color: transparent;
}

.container {
position: relative;
text-align: center;
}

.moon {
width: 180px;
height: 180px;
background: radial-gradient(circle at 40% 40%, #ffffff, #c7c7c7, #5a5a5a);
border-radius: 50%;
box-shadow: 0 0 80px rgba(255, 255, 255, 0.4);
animation: pulse 3s ease-in-out infinite;
cursor: pointer;
transition: transform 0.2s;
}

.moon:active {
transform: scale(0.95);
}

.instruction {
position: absolute;
bottom: -40px;
width: 100%;
font-size: 20px;
color: rgba(255, 255, 255, 0.8);
text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
opacity: 0.9;
animation: fadeInOut 2s infinite;
}

@keyframes pulse {
0%, 100% { transform: scale(1); }
50% { transform: scale(1.05); }
}

@keyframes fadeInOut {
0%, 100% { opacity: 0.5; }
50% { opacity: 1; }
}
</style>
</head>
<body>
<div class="container">
<div class="moon" id="moon"></div>
<div class="instruction">المس القمر</div>
</div>

<audio id="player" hidden></audio>

<script>
// تهيئة المشغل الصوتي
const songs = [
'songs/song1.mp3',
'songs/song2.mp3',
'songs/song3.mp3'
];

let currentSong = 0;
const player = document.getElementById('player');
const moon = document.getElementById('moon');

// دعم الأجهزة التي تعمل باللمس
function handleStart() {
if(player.paused) {
playRandomSong();
moon.style.animationPlayState = 'running';
} else {
player.pause();
moon.style.animationPlayState = 'paused';
}
}

// تجنب الزووم على iOS
document.documentElement.addEventListener('touchstart', function(e) {
if(e.touches.length > 1) e.preventDefault();
}, { passive: false });

// أحداث اللمس والنقر
moon.addEventListener('touchstart', function(e) {
e.preventDefault();
handleStart();
});

moon.addEventListener('click', handleStart);

function playRandomSong() {
currentSong = Math.floor(Math.random() * songs.length);
player.src = songs[currentSong];
// إصلاح مشكلة التشغيل على iOS
player.play().catch(error => {
console.log('يجب تفعيل التشغيل باللمس الأول');
});
}

// التبديل التلقائي عند انتهاء الأغنية
player.addEventListener('ended', () => {
currentSong = (currentSong + 1) % songs.length;
player.src = songs[currentSong];
player.play();
});

// إخفاء التعليمات بعد التشغيل
player.addEventListener('play', () => {
document.querySelector('.instruction').style.display = 'none';
});
</script>
</body>
</html>
